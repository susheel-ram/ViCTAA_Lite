<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Settings</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='nav.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='settings-page.css') }}">
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='favicon.png') }}">
</head>
<body class="settings-page">
    <header>
        <!-- <h2>Welcome, {{ session['username'] }}!</h2> -->
        <img src="{{ url_for('static', filename='EC_1.png') }}" alt="Logo" class="header-logo">
        <nav>
            <ul>
                <li><a href="{{ url_for('welcome') }}">Home</a></li>
                <li><a href="{{ url_for('profile') }}">Profile</a></li>
                <li><a href="{{ url_for('settings') }}">Settings</a></li>
            </ul>
        </nav>
        <form method="POST" action="{{ url_for('logout') }}">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"> <!-- Hidden CSRF token -->
            <button type="submit">Logout</button>
        </form>
    </header>

    <div class="container">
        <h3>Settings</h3>
        <p>Welcome to your settings page, {{ session['username'] }}.</p>
        <form action="{{ url_for('update_admin_email') }}" method="POST">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
            <p>Your current admin email is: <strong>{{ session.get('admin_email', 'default_admin@example.com') }}</strong></p>
            <label for="admin_email">Update Admin Email:</label>
            <input type="email" id="admin_email" name="admin_email" required>
            <button type="submit">Update</button>
            
        </form>
        <h4>Reset Password</h4>
        <form action="{{ url_for('settings_password_reset_request') }}" method="POST">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
            <label for="reset_email">Enter your registered email:</label>
            <input type="email" id="reset_email" name="email" required>
            <button type="submit">Send Reset Link & OTP</button>
        </form>

    </div>
</body>
</html>
